<!DOCTYPE html>
<html lang="en">
<head><script type='text/javascript' src='https://ppl-ai-code-interpreter-files.s3.amazonaws.com/HrkwcBKUNapcfJVCM0Zhqi1w5kHH0sMP0bzFrf0DCHqcOiBdn4R7NDMHjd_MCdktXx9MijSaBc8bL1D2gar0U8T7ymGU0WgWrZTToGA7n7NxbPLU4om-9dJH3siJ5zWSYsLoWV5Pxk4IGOUgQxyMGw8bZ0bZ4X9r6Cq75usSv3qeuM-U0CNWSvXl1T87zEP8ZASD7d8kYeo1DgrzGZXXCQju0X-7M3Eft64GsvAcHkkdB0qbfbTIeJejsxyP00eLoy1bbV8fXz15Zyy0M4Jo20drseHlWl0gstsRmb1Ss9kBAm07LbVb66HcDqjaQuC1woWOZC7j5h7jZ1beXZ1kO7MR0hHDYK1O0ljzU6ST53WkVG1x-JGxVImCveHuRtdt_4-XKPZBEijm5sbXkP_9OzQKYJ7hnxuer64ZKBaMHulfuHZ2u_4KT4V3KHlrwU2hg_4XziTyGV0gDM61PpKUEqzzVrxXVDALylwKoSMTa5xKHlb-cQ_cxFgSu8Nahe3nllBcdFrvC_uyZJjYsZf34lmyMNsTmEcayCU0DMx5A5h7UD0WrSKB1ZGGO52EdubG0uz-bCtz35P3_jC7nkh-aosvpG80gKwtBQDFTrDV1gogjF04oIVcPBM9FwZynnGx5YJaRr9ZBf3VCoZPMRLTvyAvJeYdyBMMA2Ze_n3qCLwXgoDrCbj-z3V_vqo5Sk_t1Cb2azx_nDxX8bEmniWjdpNni7CWzvPQ4fV5ehhVXh4MYeOhvmpjtRAwV9RLTB4k2Adr9zIQjLhZ2d2iWQxa165gYzMSbluBZH1mSRyuggFBIbCMUss2YgZ_JXoxxbl3Q7-tqjXgqWr4ful-kaWjkHIOYz_FMvt6Y2TjHYbCcWImY-4-hEl7NZffthkKsqXu9paInS4MiJz8QdN-sYADpCX3ErxsMf6fGm5vd2prBC2G7eSqeuaVZDjEKazPzx3hC6z3aTmpYq7v5n0gMHMNW4Rih3WryK1dNn1y19GSoXfluakSIp7NF6dg4m8oAOyX5tBZslX5yMH6SjUc67sbEzH28cDe79k1eEwRbkyie2_50CenhkSTKS_jFAO863Q1Wj1733-swi7Isvnbt6--Lptwpdn6l004Y3VEHEf2dvfmPUGkX56PHzB7yXylD-12Nr0YsCDtm-rnPSZFOZ0W8W64iGThPgzMqUjV8pI2aNGM7W13lSIk2Ir-1nsSxuYSFk-NYn6d1hnghOdIMu8NlDp2JHCu_syhuQdOxYi8ht9vV5QOUvirrvecogi83AgmucgFxr8u0ysN7dGH0BOYuHkl7gASG_F1XYcwgdKExhJN5rjtHfb7Uc1tKjNuMZgd6dq3g8tFcUk3lyhL9I_vGGWSsOuEUFLNvKbNS1i35Hai2dbIlSMSKUfkF9neFWSxGhEGUtXuJFB1qn3j2TNmIsY74I9QJH2OQWSqSInuaSHY8ZvtcC1OKx_9CqCrvle0TxZA1Zs8la_QViP6wqUxkxMDn-7nHmczk80Kio6kP-KfUY5kZa6kmPoK-axGttsCoqg8r59Tj52L9usMxv-G0P4kZR5VvUmhP_9M91W0tafpCe7iTQWQjA2SpWdg23gBYBwXw76d6U5B1efpz-5zT9bQWiF3UInNdJVjEC33Zm1llwrNd5GjwL35ff7rpRV1IZjc96kpF9CxsxX8NBE7Wnu8Duxh8J8XfNu6pk_KEcamGBtMg8UTSiK3h4bmVG8d-eOW3g_I33cQTMbbPqX2Waz5uVHoOhyac_HQZ5RKpMTs4yeG2OaDGSzlYJZO3LOBePlB5btluwa1qyqemPmHJPA9egp4EFbCzbW9QC1JiW67ATr9F1XUsxrX_2dSYe8uOXsx46vt4OHdl3kA0to9f2h9lGaf0QlGayODBlOGPcuX12WuaZqyoPwygmjOI5sFq2Y4jMILn4VXYUDlMIL0DjELp1CjX5WVKsfngycOUWXHNpIfhMSBk15bh5r1hMIOBDdcyPY6-7ay5tz6Z6Re11cZP5_CCOTT-22leGFDdtlx-fsRdjUa5k11DMNrtkkDdxovWCJTfYAEWX3B36v_-twZKXVv3W3TgE5st8r5BNzjMToZPUExTh_sY5x-VBsVwqhSwZzn_oQGler_cxlPkBUR4LBNIa6_tlxr4bH9RaNuqS2bLK-TZ1MlmHODZByg_UsWe5fyLFeSmWFrO3tSnJd2K2akn88vN1CfY3EwsFQXzyJzw2EWjlYdPeb-fH1yRqmDlFFJmX1TIJi6O-rXznOEMcY-qCtbKzVRf_cuAlnnUbY1AqUv0VDv-xzu18sPSnQJABfkvFWrqJNf-SqbfVySTh2nK6U6XirhA2d4MUK9HmzLzWivtIWmnBc34S7dmzVEmD7xE3UunxX-viJGnJC_qkVa4Xo1HuJUl4PhxE2ZPEA0uNwbfTSaBSOOl15GuyjUQc5Wnp_KucX41jTmVMoB5knSN0-Dbv2Hr-eX6b6Z-ZPt_nN_1sb8zFcArC0MYhGzGUsgXqku2KFDeYIWd4y8IS4VWNgnhEnh7E16-_eVmowcd6uVmoKAdKtv8aJSTNLE-Gc2I6s-vpiiYPceVympiv3GWLh_6stOum9LzfZ5Rh7sF40arPdUv6UJ4_kTGaM4vZoHXhPMUYiMJgF668Z1t6iBWmm4h0G1ShgIvCg3yRKooC8KQGOmE-hPsqWK8NbrJy9c49PCqpqQJgefsJ4Mlffh1TlyO2CHD-xAuEQ_AZXnOV4hVFpN94fxX74TQA'></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Flashcards">
    <meta name="theme-color" content="#667eea">
    <link rel="manifest" href="manifest.json">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 192 192'><rect fill='%23667eea' width='192' height='192'/><text x='96' y='120' font-size='100' fill='white' text-anchor='middle'>üß†</text></svg>">
    <title>Language Flashcards</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; color: #333; padding-top: max(20px, env(safe-area-inset-top)); padding-bottom: max(20px, env(safe-area-inset-bottom)); padding-left: max(10px, env(safe-area-inset-left)); padding-right: max(10px, env(safe-area-inset-right)); transition: background 0.3s; }
        body.dark { background: linear-gradient(135deg, #2d2d44 0%, #1a1a2e 100%); color: white; }
        .container { max-width: 600px; margin: 0 auto; }
        header { background: rgba(255,255,255,0.1); backdrop-filter: blur(10px); padding: 20px; border-radius: 15px; margin-bottom: 20px; color: white; display: flex; justify-content: space-between; align-items: center; }
        h1 { font-size: 24px; }
        .nav-btn { background: rgba(255,255,255,0.2); color: white; border: none; padding: 10px 15px; border-radius: 10px; cursor: pointer; font-size: 18px; transition: all 0.2s; }
        .nav-btn:active { background: rgba(255,255,255,0.4); transform: scale(0.95); }
        .view { display: none; }
        .view.active { display: block; animation: fadeIn 0.3s; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        .sidebar { position: fixed; left: 0; top: 0; width: 280px; height: 100vh; background: white; box-shadow: 2px 0 10px rgba(0,0,0,0.1); padding: 20px 0; z-index: 1000; transform: translateX(-100%); transition: transform 0.3s; overflow-y: auto; }
        body.dark .sidebar { background: #1e1e2e; color: white; }
        .sidebar.open { transform: translateX(0); }
        .sidebar-header { padding: 20px; font-weight: bold; font-size: 18px; display: flex; justify-content: space-between; align-items: center; }
        .close-sidebar { background: none; border: none; font-size: 24px; cursor: pointer; }
        .sidebar-item { padding: 15px 20px; cursor: pointer; border-left: 4px solid transparent; transition: all 0.2s; }
        .sidebar-item:active { background: #f0f0f0; }
        body.dark .sidebar-item:active { background: #2d2d44; }
        .sidebar-item.active { background: #f0f0f0; border-left-color: #667eea; }
        body.dark .sidebar-item.active { background: #2d2d44; border-left-color: #667eea; }
        .card-container { background: white; border-radius: 25px; padding: 40px 20px; margin: 20px 0; box-shadow: 0 10px 40px rgba(0,0,0,0.15); min-height: 250px; display: flex; align-items: center; justify-content: center; text-align: center; cursor: pointer; transition: transform 0.3s; perspective: 1000px; }
        body.dark .card-container { background: #1e1e2e; }
        .card-container:active { transform: scale(0.98); }
        .card-inner { position: relative; width: 100%; height: 200px; transform-style: preserve-3d; transition: transform 0.6s; }
        .card-inner.flipped { transform: rotateY(180deg); }
        .card-front, .card-back { position: absolute; width: 100%; height: 100%; backface-visibility: hidden; display: flex; align-items: center; justify-content: center; font-size: 32px; font-weight: bold; color: #667eea; word-wrap: break-word; padding: 20px; line-height: 1.4; }
        .card-back { transform: rotateY(180deg); color: #764ba2; }
        body.dark .card-front, body.dark .card-back { color: #a0a0ff; }
        .progress-container { background: white; border-radius: 15px; padding: 20px; margin-bottom: 20px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); }
        body.dark .progress-container { background: #1e1e2e; color: white; }
        .progress-bar { background: #e0e0e0; height: 10px; border-radius: 10px; overflow: hidden; margin: 10px 0; }
        .progress-fill { background: linear-gradient(90deg, #667eea, #764ba2); height: 100%; width: 0%; transition: width 0.3s; }
        .stats { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 15px; }
        .stat { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 15px; border-radius: 10px; text-align: center; }
        .stat-value { font-size: 24px; font-weight: bold; }
        .stat-label { font-size: 12px; opacity: 0.8; }
        .button-group { display: flex; gap: 10px; flex-wrap: wrap; justify-content: center; margin: 20px 0; }
        button { background: #667eea; color: white; border: none; padding: 12px 24px; border-radius: 25px; font-size: 16px; cursor: pointer; font-weight: 600; transition: all 0.2s; }
        button:active { transform: scale(0.95); background: #764ba2; }
        button.secondary { background: #764ba2; }
        button.danger { background: #ff6b6b; }
        input, textarea, select { padding: 12px; border-radius: 10px; border: 2px solid #e0e0e0; margin: 10px 0; width: 100%; font-size: 16px; font-family: inherit; transition: all 0.2s; }
        body.dark input, body.dark textarea, body.dark select { background: #2d2d44; color: white; border-color: #444; }
        input:focus, textarea:focus, select:focus { outline: none; border-color: #667eea; box-shadow: 0 0 10px rgba(102, 126, 234, 0.2); }
        .form-group { margin-bottom: 20px; }
        .label { display: block; margin-bottom: 8px; font-weight: 600; color: #333; }
        body.dark .label { color: white; }
        .deck-item { background: white; padding: 15px; margin: 10px 0; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); display: flex; justify-content: space-between; align-items: center; transition: all 0.2s; }
        body.dark .deck-item { background: #2d2d44; color: white; }
        .deck-item:active { background: #f5f5f5; }
        body.dark .deck-item:active { background: #3d3d54; }
        .deck-info { flex: 1; }
        .deck-name { font-weight: bold; font-size: 16px; }
        .deck-count { font-size: 12px; color: #999; margin-top: 5px; }
        .deck-actions { display: flex; gap: 8px; }
        .icon-btn { background: none; border: none; font-size: 20px; cursor: pointer; padding: 8px; transition: all 0.2s; }
        .icon-btn:active { opacity: 0.6; }
        .overlay { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.5); z-index: 999; display: none; }
        .overlay.show { display: block; }
        .confetti { position: fixed; pointer-events: none; font-size: 30px; animation: confetti-fall 3s ease-out forwards; z-index: 2000; }
        @keyframes confetti-fall { to { transform: translateY(100vh) rotate(360deg); opacity: 0; } }
        .toggle { display: inline-flex; width: 50px; height: 28px; background: #e0e0e0; border-radius: 14px; border: none; cursor: pointer; position: relative; transition: all 0.3s; }
        .toggle.on { background: #667eea; }
        .toggle-dot { position: absolute; width: 24px; height: 24px; background: white; border-radius: 12px; top: 2px; left: 2px; transition: left 0.3s; }
        .toggle.on .toggle-dot { left: 24px; }
        .loading { display: inline-block; width: 20px; height: 20px; border: 3px solid #f3f3f3; border-top: 3px solid #667eea; border-radius: 50%; animation: spin 1s linear infinite; margin-right: 10px; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        hr { margin: 30px 0; border: none; border-top: 1px solid #e0e0e0; }
        body.dark hr { border-top-color: #444; }
        .success-message { background: #d4edda; color: #155724; padding: 12px; border-radius: 8px; margin: 10px 0; }
        .error-message { background: #f8d7da; color: #721c24; padding: 12px; border-radius: 8px; margin: 10px 0; }
        @media (max-width: 600px) {
            .card-front, .card-back { font-size: 24px; }
            header { padding: 15px; }
            h1 { font-size: 20px; }
        }
    </style>
</head>
<body>
    <div class="overlay" id="overlay"></div>
    
    <!-- Sidebar Navigation -->
    <div class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <span>Menu</span>
            <button class="close-sidebar" onclick="app.toggleSidebar()">‚úï</button>
        </div>
        <div class="sidebar-item active" onclick="app.showView('study'); app.toggleSidebar()">üìö Study</div>
        <div class="sidebar-item" onclick="app.showView('decks'); app.toggleSidebar()">üìã My Decks</div>
        <div class="sidebar-item" onclick="app.showView('create'); app.toggleSidebar()">‚ûï Create Deck</div>
        <div class="sidebar-item" onclick="app.showView('import'); app.toggleSidebar()">üì§ Import/Generate</div>
        <div class="sidebar-item" onclick="app.showView('settings'); app.toggleSidebar()">‚öôÔ∏è Settings</div>
        <div class="sidebar-item" onclick="app.showView('about'); app.toggleSidebar()">‚ÑπÔ∏è About</div>
    </div>

    <!-- Header -->
    <div class="container">
        <header>
            <button class="nav-btn" onclick="app.toggleSidebar()">‚ò∞</button>
            <h1>üß† Flashcards</h1>
            <button class="nav-btn" onclick="app.toggleDarkMode()" id="themeBtn">üåô</button>
        </header>

        <!-- Study View -->
        <div class="view active" id="study">
            <div class="progress-container">
                <h3 id="deckTitle" style="margin-bottom: 10px;">Select a Deck</h3>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill" style="width: 0%"></div>
                </div>
                <div style="text-align: center; font-size: 14px; color: #999; margin-top: 8px;">
                    <span id="currentCard">0</span> / <span id="totalCards">0</span>
                </div>
                <div class="stats">
                    <div class="stat">
                        <div class="stat-label">Learned</div>
                        <div class="stat-value" id="learnedCount">0</div>
                    </div>
                    <div class="stat">
                        <div class="stat-label">Remaining</div>
                        <div class="stat-value" id="remainingCount">0</div>
                    </div>
                </div>
            </div>

            <div class="card-container" onclick="app.flipCard()">
                <div class="card-inner" id="cardInner">
                    <div class="card-front" id="cardFront">Click to start studying</div>
                    <div class="card-back" id="cardBack"></div>
                </div>
            </div>

            <div class="button-group">
                <button class="secondary" onclick="app.skipCard()">Skip ‚è≠Ô∏è</button>
                <button onclick="app.markGood()">Easy üëç</button>
                <button class="danger" onclick="app.markAgain()">Hard üîÑ</button>
            </div>
        </div>

        <!-- Decks View -->
        <div class="view" id="decks">
            <h2 style="margin-bottom: 20px;">My Decks</h2>
            <div id="decksList"></div>
        </div>

        <!-- Create Deck View -->
        <div class="view" id="create">
            <h2 style="margin-bottom: 20px;">Create New Deck</h2>
            <div class="form-group">
                <label class="label">Deck Name</label>
                <input type="text" id="newDeckName" placeholder="e.g., Italian A1">
            </div>
            <button onclick="app.createNewDeck()" style="width: 100%;">Create Deck</button>
            <hr>
            <h3 style="margin-bottom: 15px;">Add Cards</h3>
            <div class="form-group">
                <label class="label">Front (e.g., Italian)</label>
                <input type="text" id="cardFrontInput" placeholder="Ciao">
            </div>
            <div class="form-group">
                <label class="label">Back (e.g., English)</label>
                <input type="text" id="cardBackInput" placeholder="Hello">
            </div>
            <button onclick="app.addCardToDeck()" style="width: 100%;">Add Card</button>
            <div id="currentCardsPreview" style="margin-top: 20px;"></div>
        </div>

        <!-- Import/Generate View -->
        <div class="view" id="import">
            <h2 style="margin-bottom: 20px;">Import or Generate Decks</h2>
            <h3 style="margin: 20px 0 10px;">üì§ Import Deck</h3>
            <div class="form-group">
                <label class="label">Select File (CSV, JSON, or TXT)</label>
                <input type="file" id="fileInput" accept=".csv,.json,.txt">
            </div>
            <button onclick="app.importDeck()" style="width: 100%;">Import</button>

            <hr>

            <h3 style="margin: 20px 0 10px;">ü§ñ AI Generate Deck</h3>
            <div class="form-group">
                <label class="label">Topic (e.g., Italian Business Vocabulary)</label>
                <input type="text" id="aiTopic" placeholder="Italian food vocabulary">
            </div>
            <div class="form-group">
                <label class="label">Deck Name</label>
                <input type="text" id="generatedDeckName" placeholder="Auto-filled from topic">
            </div>
            <div class="form-group">
                <label class="label">OpenAI API Key (Optional)</label>
                <input type="password" id="apiKey" placeholder="sk-...">
                <small style="color: #999; display: block; margin-top: 5px;">Get free credits at platform.openai.com. Leave blank for demo.</small>
            </div>
            <button onclick="app.generateDeck()" style="width: 100%;">Generate Deck</button>
            <div id="generatedPreview" style="margin-top: 20px;"></div>
        </div>

        <!-- Settings View -->
        <div class="view" id="settings">
            <h2 style="margin-bottom: 20px;">Settings</h2>
            <div class="form-group">
                <label class="label">Dark Mode</label>
                <button class="toggle" id="darkModeToggle" onclick="app.toggleDarkMode()">
                    <div class="toggle-dot"></div>
                </button>
            </div>
            <hr>
            <h3 style="margin-bottom: 15px;">Data Management</h3>
            <button onclick="app.exportAllData()" style="width: 100%; margin-bottom: 10px;">üíæ Export All Data</button>
            <button onclick="app.clearAllData()" class="danger" style="width: 100%;">üóëÔ∏è Clear All Data</button>
        </div>

        <!-- About View -->
        <div class="view" id="about">
            <h2 style="margin-bottom: 20px;">About</h2>
            <p style="line-height: 1.8; color: #666;">
                <strong>Language Flashcard PWA v1.0</strong><br><br>
                A fast, offline-first flashcard app for language learning. Create, import, or generate decks with AI. Study with spaced repetition algorithm. All data saved locally on your device.<br><br>
                <strong>‚ú® Features:</strong><br>
                ‚úì Create custom decks<br>
                ‚úì Import CSV/JSON/TXT<br>
                ‚úì AI deck generation<br>
                ‚úì Offline support<br>
                ‚úì Progress tracking<br>
                ‚úì Dark mode<br>
                ‚úì Export/Import backup<br><br>
                <strong>üì± Works Best On:</strong><br>
                Safari on iPhone (add to home screen for PWA)<br>
                Chrome/Firefox on desktop<br><br>
                All data stays on your device. No server sync.<br>
                <a href="https://github.com" style="color: #667eea;">GitHub Source</a>
            </p>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>